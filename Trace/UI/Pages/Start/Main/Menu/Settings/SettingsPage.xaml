<?xml version="1.0" encoding="UTF-8"?>
<ContentPage
	xmlns="http://xamarin.com/schemas/2014/forms"
	xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
	xmlns:local="clr-namespace:Trace;assembly=Trace"
	xmlns:language="clr-namespace:Trace.Localization;assembly=Trace"
	x:Class="Trace.SettingsPage"
	Title="{language:Translate Settings}">
	<ContentPage.BindingContext>
		<local:SettingsPageModel />
	</ContentPage.BindingContext>
	<ContentPage.Resources>
		<ResourceDictionary>
			<Style
				TargetType="Label">
				<Setter
					Property="VerticalOptions"
					Value="Center" />
			</Style>
			<Style
				TargetType="Entry">
				<Setter
					Property="VerticalOptions"
					Value="Center" />
			</Style>
			<Style
				TargetType="{x:Type local:BindablePicker}">
				<Setter
					Property="VerticalOptions"
					Value="Center" />
			</Style>
		</ResourceDictionary>
	</ContentPage.Resources>
	<ContentPage.Content>
		<TableView
			Intent="Settings">
			<TableRoot>
				<TableSection
					Title="{language:Translate CaloriesCalculation}">
					<EntryCell
						Completed="onSettingChanged"
						Label="{language:Translate Age}"
						Text="{Binding User.Age, Mode=TwoWay}">
					</EntryCell>
					<ViewCell>
						<StackLayout
							Orientation="Horizontal">
							<Label
								TranslationX="15"
								Text="{language:Translate Gender}" />
							<local:BindablePicker
								TranslationX="25"
								SelectedIndexChanged="onGenderChanged"
								Title="{Binding User.Gender}"
								SelectedValue="{Binding User.Gender, Mode=TwoWay}"
								ItemsSource="{Binding Genders}" />
						</StackLayout>
					</ViewCell>
					<EntryCell
						Label="{language:Translate Height}"
						Completed="onSettingChanged"
						Text="{Binding User.Height, Mode=TwoWay}" />
					<EntryCell
						Label="{language:Translate Weight}"
						Completed="onSettingChanged"
						Text="{Binding User.Weight, Mode=TwoWay}" />
				</TableSection>
				<TableSection
					Title="{language:Translate Sound}">
					<ViewCell>
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition
									Width="10" />
								<ColumnDefinition
									Width="150" />
								<ColumnDefinition
									Width="*" />
							</Grid.ColumnDefinitions>
							<Label
								Grid.Column="1"
								Text="{language:Translate IneligibleBackground}"
								LineBreakMode="TailTruncation" />
							<local:BindablePicker
								Grid.Column="2"
								SelectedIndexChanged="onIneligibleSoundChanged"
								Title="{Binding User.BackgroundIneligibleSoundSetting}"
								SelectedValue="{Binding User.BackgroundIneligibleSoundSetting, Mode=TwoWay}"
								ItemsSource="{Binding Sounds}" />
						</Grid>
					</ViewCell>
					<ViewCell>
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition
									Width="10" />
								<ColumnDefinition
									Width="150" />
								<ColumnDefinition
									Width="*" />
							</Grid.ColumnDefinitions>
							<Label
								Grid.Column="1"
								Text="{language:Translate EligibleBackground}"
								LineBreakMode="TailTruncation" />
							<local:BindablePicker
								Grid.Column="2"
								SelectedIndexChanged="onEligibleSoundChanged"
								Title="{Binding User.BycicleEligibleSoundSetting}"
								SelectedValue="{Binding User.BycicleEligibleSoundSetting, Mode=TwoWay}"
								ItemsSource="{Binding Sounds}" />
						</Grid>
					</ViewCell>
					<ViewCell>
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition
									Width="10" />
								<ColumnDefinition
									Width="150" />
								<ColumnDefinition
									Width="*" />
							</Grid.ColumnDefinitions>
							<Label
								Grid.Column="1"
								Text="{language:Translate EligibleWarning}"
								LineBreakMode="TailTruncation" />
							<local:BindablePicker
								Grid.Column="2"
								SelectedIndexChanged="onCongratulatorySoundChanged"
								Title="{Binding User.CongratulatorySoundSetting}"
								SelectedValue="{Binding User.CongratulatorySoundSetting, Mode=TwoWay}"
								ItemsSource="{Binding Sounds}" />
						</Grid>
					</ViewCell>
					<ViewCell>
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition
									Width="10" />
								<ColumnDefinition
									Width="150" />
								<ColumnDefinition
									Width="*" />
							</Grid.ColumnDefinitions>
							<Label
								Grid.Column="1"
								Text="{language:Translate IneligibleWarning}"
								LineBreakMode="TailTruncation" />
							<local:BindablePicker
								Grid.Column="2"
								SelectedIndexChanged="onNoLongerEligibleSoundChanged"
								Title="{Binding User.NoLongerEligibleSoundSetting}"
								SelectedValue="{Binding User.NoLongerEligibleSoundSetting, Mode=TwoWay}"
								ItemsSource="{Binding Sounds}" />
						</Grid>
					</ViewCell>
				</TableSection>
				<TableSection
					Title="{language:Translate Challenges}">
					<EntryCell
						Completed="onSettingChanged"
						Label="{language:Translate SearchRadius}"
						Text="{Binding User.SearchRadius, Mode=TwoWay}" />
					<EntryCell
						Completed="onSettingChanged"
						Label="Maximum"
						Text="200" />
				</TableSection>
				<TableSection
					Title="Language">
					<ViewCell>
						<local:BindablePicker
							Title="{Binding User.UserLanguage}"
							ItemsSource="{Binding Languages}"
							SelectedIndexChanged="onLanguageChanged"
							SelectedItem="{Binding User.UserLanguage, Mode=TwoWay}" />
					</ViewCell>
				</TableSection>
				<TableSection
					Title="{language:Translate Delete}">
					<TextCell
						Text="{language:Translate Challenges}"
						Tapped="onLicensesClicked" />
					<TextCell
						Text="{language:Translate Routes}"
						Tapped="onLicensesClicked" />
					<TextCell
						Text="{language:Translate Everything}"
						Tapped="onDeleteEverything" />
				</TableSection>
				<TableSection
					Title="{language:Translate Information}">
					<TextCell
						Text="{language:Translate Licenses}"
						Tapped="onLicensesClicked" />
					<TextCell
						Text="{language:Translate ToS}"
						Tapped="onTermsOfServiceClicked" />
					<TextCell
						Text="{language:Translate PrivacyPolicy}"
						Tapped="onPrivacyPolicyClicked" />
					<TextCell
						Text="{language:Translate AboutUs}"
						Tapped="onAboutUsClicked" />
				</TableSection>
			</TableRoot>
		</TableView>
	</ContentPage.Content>
</ContentPage>